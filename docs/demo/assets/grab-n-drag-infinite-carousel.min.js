!function(t){"use strict";function i(t,i){if("string"==typeof t&&(t=document.querySelector(t)),!(t&&t instanceof HTMLElement))throw new Error("InfiniteScrollCarousel: Container element not found");if(this.container=t,this.options={speed:50,reverseDirection:!1,pauseOnHover:!0,momentumDecay:.05,maxMomentumSpeed:2,fadeColor:"#ffffff",fadeWidth:50,interactable:!0,copies:3,disableMomentum:!1},i&&"object"==typeof i){var e=i;"number"==typeof e.speed&&Number.isFinite(e.speed)&&(this.options.speed=e.speed),"boolean"==typeof e.reverseDirection&&(this.options.reverseDirection=e.reverseDirection),"boolean"==typeof e.pauseOnHover&&(this.options.pauseOnHover=e.pauseOnHover),"number"==typeof e.momentumDecay&&Number.isFinite(e.momentumDecay)&&(this.options.momentumDecay=e.momentumDecay),"number"==typeof e.maxMomentumSpeed&&Number.isFinite(e.maxMomentumSpeed)&&(this.options.maxMomentumSpeed=e.maxMomentumSpeed),"string"==typeof e.fadeColor&&(this.options.fadeColor=e.fadeColor),"number"==typeof e.fadeWidth&&Number.isFinite(e.fadeWidth)&&(this.options.fadeWidth=e.fadeWidth),"boolean"==typeof e.interactable&&(this.options.interactable=e.interactable),"number"==typeof e.copies&&Number.isFinite(e.copies)&&(this.options.copies=e.copies),"boolean"==typeof e.disableMomentum&&(this.options.disableMomentum=e.disableMomentum),"function"==typeof e.onReady&&(this.options.onReady=e.onReady),"function"==typeof e.onDragStart&&(this.options.onDragStart=e.onDragStart),"function"==typeof e.onDrag&&(this.options.onDrag=e.onDrag),"function"==typeof e.onDragEnd&&(this.options.onDragEnd=e.onDragEnd),"function"==typeof e.onMomentumStart&&(this.options.onMomentumStart=e.onMomentumStart),"function"==typeof e.onMomentumEnd&&(this.options.onMomentumEnd=e.onMomentumEnd),"function"==typeof e.onPositionReset&&(this.options.onPositionReset=e.onPositionReset),"function"==typeof e.onPause&&(this.options.onPause=e.onPause),"function"==typeof e.onResume&&(this.options.onResume=e.onResume)}this.validateOptions(),this.isScrolling=!1,this.isPaused=!1,this.isDragging=!1,this.isMomentumActive=!1,this.currentPosition=0,this.animationId=null,this.lastTimestamp=0,this.resetPosition=null,this.totalSetWidth=null,this.isMeasuring=!1,this.originalItemCount=0,this.hasDuplicated=!1,this.dragStartX=0,this.dragStartPosition=0,this.minDragBoundary=0,this.maxDragBoundary=0,this.velocity=0,this.lastDragTime=0,this.lastDragX=0,this.sizeObserver=null,this.sizeObserverTimeout=null,this.lastMeasurement=null,this.onDragCallbackFrame=null,this.boundHandlers={mouseenter:null,mouseleave:null,mousedown:null,mousemove:null,mouseup:null,mouseleaveWindow:null,touchstart:null,touchmove:null,touchend:null,selectstart:null},this.destroyed=!1,this.init()}i.prototype.invokeCallback=function(t){const i=this.options[t];if("function"==typeof i)try{const t=Array.prototype.slice.call(arguments,1);i.apply(null,t)}catch(i){console.error("InfiniteScrollCarousel: Error in "+t+" callback:",i)}},i.prototype.validateOptions=function(){if(this.options.speed<0){const t=this.options.speed;this.options.speed=Math.abs(this.options.speed),this.options.reverseDirection=!0,console.warn("InfiniteScrollCarousel: Negative speed value "+t+" Speed updated to "+this.options.speed+" and reverseDirection set to true.")}if(this.options.momentumDecay<.01||this.options.momentumDecay>.5){const t=this.options.momentumDecay;this.options.momentumDecay=Math.max(.01,Math.min(.5,t)),console.warn("InfiniteScrollCarousel: momentumDecay value "+t+" is outside valid range (0.01 - 0.5). Clamped to "+this.options.momentumDecay+".")}if(this.options.maxMomentumSpeed<.5||this.options.maxMomentumSpeed>25){const t=this.options.maxMomentumSpeed;this.options.maxMomentumSpeed=Math.max(.5,Math.min(25,this.options.maxMomentumSpeed)),console.warn("InfiniteScrollCarousel: maxMomentumSpeed value "+t+" is outside valid range (0.5 - 25). Clamped to "+this.options.maxMomentumSpeed+".")}if(this.options.copies<3||this.options.copies>100){const t=this.options.copies;this.options.copies=Math.max(3,Math.min(100,this.options.copies)),console.warn("InfiniteScrollCarousel: copies value "+t+" is outside valid range (3 - 100). Clamped to "+this.options.copies+".")}},i.prototype.init=function(){"loading"===document.readyState?document.addEventListener("DOMContentLoaded",this.initialize.bind(this)):this.initialize()},i.prototype.initialize=function(){this.applyFadeProperties(),this.duplicateItems(),this.setupEventListeners(),this.waitForResources(function(){this.calculateScrollDistance(function(){this.setInitialPosition(),this.isPaused=!1,this.isScrolling=!0,this.lastTimestamp=0,this.animationId||this.isMomentumActive||this.animate(),this.setupSizeObserver(),this.invokeCallback("onReady")}.bind(this))}.bind(this))},i.prototype.colorToRgba=function(t,i){if(void 0===i&&(i=.3),t.startsWith("rgba")){const e=t.match(/rgba?\(([^)]+)\)/);if(e){const t=e[1].split(",").map(function(t){return t.trim()});return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+i+")"}}if(t.startsWith("rgb")){const e=t.match(/rgb\(([^)]+)\)/);if(e){const t=e[1].split(",").map(function(t){return t.trim()});return"rgba("+t[0]+", "+t[1]+", "+t[2]+", "+i+")"}}if(t.startsWith("#")){3===(t=t.replace("#","")).length&&(t=t.split("").map(function(t){return t+t}).join(""));return"rgba("+parseInt(t.substring(0,2),16)+", "+parseInt(t.substring(2,4),16)+", "+parseInt(t.substring(4,6),16)+", "+i+")"}return t},i.prototype.applyFadeProperties=function(){let t=this.container.parentElement;if(!t||!t.classList||!t.classList.contains("infinite-scroll-wrapper")){let i=this.container.parentElement;for(;i&&i!==document.body;){if(i.classList&&i.classList.contains("infinite-scroll-wrapper")){t=i;break}i=i.parentElement}}if(!t)return void console.warn("InfiniteScrollCarousel: Could not find wrapper element");const i=this.colorToRgba(this.options.fadeColor,1);t.style.setProperty("--fade-gradient-left","linear-gradient(to right, "+i+", transparent)"),t.style.setProperty("--fade-gradient-right","linear-gradient(to left, "+i+", transparent)"),t.style.setProperty("--fade-width",this.options.fadeWidth+"px"),t.setAttribute("data-fade-color","")},i.prototype.waitForResources=function(t){const i=Date.now();let e=!1;const s=function(){e||(e=!0,t())},n=document.fonts&&void 0!==document.fonts.ready,o=this.container.querySelectorAll("img"),r=[];o.forEach(function(t){if(!t.complete){const i=new Promise(function(i,e){t.addEventListener("load",i),t.addEventListener("error",i),setTimeout(i,3e3)});r.push(i)}});const a=n?document.fonts.ready:Promise.resolve();Promise.all([a,Promise.all(r)]).then(function(){const t=Date.now()-i,e=Math.max(0,50-t);setTimeout(function(){s()},e)}).catch(function(){const t=Date.now()-i,e=Math.max(0,50-t);setTimeout(function(){s()},e)}),setTimeout(function(){s()},3e3)},i.prototype.setupSizeObserver=function(){if("undefined"==typeof ResizeObserver)return;this.sizeObserver&&this.sizeObserver.disconnect(),this.sizeObserverTimeout&&(clearTimeout(this.sizeObserverTimeout),this.sizeObserverTimeout=null),this.sizeObserver=new ResizeObserver(function(t){this.sizeObserverTimeout&&clearTimeout(this.sizeObserverTimeout),this.sizeObserverTimeout=setTimeout(function(){this.isMeasuring||this.calculateScrollDistance(),this.sizeObserverTimeout=null}.bind(this),100)}.bind(this)),this.sizeObserver.observe(this.container);Array.from(this.container.children).forEach(function(t){this.sizeObserver.observe(t)}.bind(this))},i.prototype.duplicateItems=function(){if(this.hasDuplicated)return;const t=Array.from(this.container.children);if(0===t.length)return console.warn("InfiniteScrollCarousel: No children found in container"),void(this.originalItemCount=0);this.originalItemCount=t.length;const i=this.options.copies||3;for(let e=1;e<i;e++)t.forEach(function(t){const i=t.cloneNode(!0);this.container.appendChild(i)}.bind(this));this.hasDuplicated=!0},i.prototype.calculateScrollDistance=function(i){if(!this.destroyed)if(this.isMeasuring){if(i){const t=setInterval(function(){this.isMeasuring||(clearInterval(t),!this.destroyed&&i&&i())}.bind(this),10)}}else{this.isMeasuring=!0;try{const e=Array.from(this.container.children);if(0===e.length)return this.isMeasuring=!1,void(!this.destroyed&&i&&i());if(!this.originalItemCount||0===this.originalItemCount)return console.warn("InfiniteScrollCarousel: No items to scroll"),this.isMeasuring=!1,void(!this.destroyed&&i&&i());const s=this.originalItemCount,n=this.isScrolling,o=this.currentPosition,r=(this.container.style.transform,this.totalSetWidth);this.isScrolling=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.container.style.transform="translateX(0px)",this.currentPosition=0,this.container.offsetHeight,requestAnimationFrame(function(){const a=function(){let i=0;if(e.length>=2*s){const t=e[0].getBoundingClientRect();i=e[s].getBoundingClientRect().left-t.left}else{const n=t.getComputedStyle(e[0]),o=parseFloat(n.marginRight)||0;for(let t=0;t<s;t++){const n=e[t];if(!n)continue;i+=n.offsetWidth,t<s-1&&(i+=o)}}return i},h=function(t){if(this.destroyed)return void(this.isMeasuring=!1);const e=Math.round(100*t)/100,s=-e;let a=o;if(r&&r!==e&&0!==o){a=o*(e/r),a>=0?a=this.options.reverseDirection?s:0:a<=s&&(a=s)}this.lastMeasurement=e,this.totalSetWidth=e,this.resetPosition=s,this.container.style.transform="translateX("+a+"px)",this.currentPosition=a,this.isScrolling=n,this.container.offsetHeight,this.calculateDragBoundaries(),this.snapToValidPosition(),!n||this.isPaused||this.isDragging||this.isMomentumActive||this.animationId||(this.lastTimestamp=0,this.animate()),this.isMeasuring=!1,!this.destroyed&&i&&i()}.bind(this);let u=a();requestAnimationFrame(function(){const t=a();Math.abs(u-t)>1?requestAnimationFrame(function(){u=a(),h(u)}.bind(this)):(u=(u+t)/2,h(u))}.bind(this))}.bind(this))}catch(t){console.error("InfiniteScrollCarousel: Error calculating scroll distance:",t),this.isMeasuring=!1,!this.destroyed&&i&&i()}}},i.prototype.setInitialPosition=function(){null!==this.resetPosition&&(this.options.reverseDirection?(this.currentPosition=this.resetPosition,this.container.style.transform="translateX("+this.currentPosition+"px)"):(this.currentPosition=0,this.container.style.transform="translateX(0px)"))},i.prototype.calculateDragBoundaries=function(){null!==this.resetPosition&&(this.minDragBoundary=this.resetPosition,this.maxDragBoundary=0)},i.prototype.setupEventListeners=function(){this.options.pauseOnHover&&(this.boundHandlers.mouseenter=function(){this.isDragging||this.isMomentumActive||this.pause()}.bind(this),this.boundHandlers.mouseleave=function(){this.isDragging||this.isMomentumActive||this.resume()}.bind(this),this.container.addEventListener("mouseenter",this.boundHandlers.mouseenter),this.container.addEventListener("mouseleave",this.boundHandlers.mouseleave)),this.options.interactable||(this.container.style.cursor="default"),this.options.interactable&&(this.boundHandlers.mousedown=this.startDragging.bind(this),this.boundHandlers.mousemove=this.handleDrag.bind(this),this.boundHandlers.mouseup=this.endDragging.bind(this),this.container.addEventListener("mousedown",this.boundHandlers.mousedown),document.addEventListener("mousemove",this.boundHandlers.mousemove),document.addEventListener("mouseup",this.boundHandlers.mouseup),this.boundHandlers.mouseleaveWindow=function(){this.isDragging&&this.endDragging()}.bind(this),t.addEventListener("mouseleave",this.boundHandlers.mouseleaveWindow),this.boundHandlers.touchstart=this.startDragging.bind(this),this.boundHandlers.touchmove=this.handleDrag.bind(this),this.boundHandlers.touchend=this.endDragging.bind(this),this.container.addEventListener("touchstart",this.boundHandlers.touchstart,{passive:!1}),document.addEventListener("touchmove",this.boundHandlers.touchmove,{passive:!1}),document.addEventListener("touchend",this.boundHandlers.touchend),this.boundHandlers.selectstart=function(t){t.preventDefault()},this.container.addEventListener("selectstart",this.boundHandlers.selectstart))},i.prototype.startDragging=function(t){this.isDragging=!0,this.isMomentumActive=!1,this.isPaused||this.pause();let i=t.clientX||t.touches&&t.touches[0].clientX;(null==i||isNaN(i))&&(i=0),this.dragStartX=i,this.dragStartPosition=this.currentPosition,this.lastDragTime=Date.now(),this.lastDragX=i,this.velocity=0,this.container.style.cursor="grabbing",this.invokeCallback("onDragStart"),t.preventDefault()},i.prototype.handleDrag=function(t){if(!this.isDragging)return;let i=t.clientX||t.touches&&t.touches[0].clientX;if(null==i||isNaN(i)){if(void 0===this.lastDragX||null===this.lastDragX||isNaN(this.lastDragX))return;i=this.lastDragX}const e=Date.now(),s=i-this.dragStartX;if(e>this.lastDragTime&&void 0!==this.lastDragX&&null!==this.lastDragX&&!isNaN(this.lastDragX)){const t=e-this.lastDragTime,s=i-this.lastDragX;t>0&&(this.velocity=s/t,this.velocity=Math.max(-this.options.maxMomentumSpeed,Math.min(this.options.maxMomentumSpeed,this.velocity)))}this.lastDragTime=e,this.lastDragX=i;let n=this.dragStartPosition+s;null!==this.resetPosition&&(n<=this.minDragBoundary?(n=this.maxDragBoundary+(n-this.minDragBoundary),this.dragStartPosition=n,this.dragStartX=i):n>=this.maxDragBoundary&&(n=this.minDragBoundary+(n-this.maxDragBoundary),this.dragStartPosition=n,this.dragStartX=i)),this.currentPosition=n,this.container.style.transform="translateX("+this.currentPosition+"px)",null===this.onDragCallbackFrame&&(this.onDragCallbackFrame=requestAnimationFrame(function(){this.invokeCallback("onDrag",this.currentPosition,s),this.onDragCallbackFrame=null}.bind(this))),t.preventDefault()},i.prototype.endDragging=function(){if(!this.isDragging)return;this.isDragging=!1,null!==this.onDragCallbackFrame&&(cancelAnimationFrame(this.onDragCallbackFrame),this.onDragCallbackFrame=null),this.invokeCallback("onDragEnd");const t=null===this.velocity||void 0===this.velocity||isNaN(this.velocity)?0:this.velocity;Math.abs(t)>.01&&!this.options.disableMomentum?(this.velocity=t,this.startMomentum()):(this.velocity=0,this.snapToValidPosition(),this.container.style.cursor="grab",this.resume())},i.prototype.startMomentum=function(){this.isMomentumActive=!0,this.container.style.cursor="grab",this.invokeCallback("onMomentumStart",this.velocity),this.animationId||this.animate()},i.prototype.snapToValidPosition=function(){null!==this.resetPosition&&(this.options.reverseDirection?this.currentPosition>=0&&(this.currentPosition=this.resetPosition,this.container.style.transform="translateX("+this.currentPosition+"px)",this.invokeCallback("onPositionReset")):this.currentPosition<=this.resetPosition&&(this.currentPosition=0,this.container.style.transform="translateX(0px)",this.invokeCallback("onPositionReset")))},i.prototype.pause=function(){this.isPaused=!0,this.invokeCallback("onPause")},i.prototype.resume=function(){this.isPaused&&(this.isPaused=!1,this.isScrolling=!0,this.lastTimestamp=0,this.animationId||this.isMomentumActive||this.animate(),this.invokeCallback("onResume"))},i.prototype.animate=function(t){if(!this.isScrolling)return void(this.animationId=null);if(0===this.lastTimestamp)return this.lastTimestamp=t||0,void(this.animationId=requestAnimationFrame(this.animate.bind(this)));const i=(t||0)-this.lastTimestamp;this.lastTimestamp=t||0;const e=Math.min(i,100);if(this.isMomentumActive&&i>0)return this.currentPosition+=this.velocity*e,this.velocity*=1-this.options.momentumDecay,null!==this.resetPosition&&(this.currentPosition<=this.minDragBoundary?this.currentPosition=this.maxDragBoundary+(this.currentPosition-this.minDragBoundary):this.currentPosition>=this.maxDragBoundary&&(this.currentPosition=this.minDragBoundary+(this.currentPosition-this.maxDragBoundary))),this.container.style.transform="translateX("+this.currentPosition+"px)",Math.abs(this.velocity)<.02&&(this.isMomentumActive=!1,this.velocity=0,this.invokeCallback("onMomentumEnd"),this.snapToValidPosition(),this.resume()),void(this.animationId=requestAnimationFrame(this.animate.bind(this)));if(!this.isPaused&&i>0&&!this.isDragging&&!this.isMomentumActive){const t=this.options.speed/1e3*e;let i;i=this.options.reverseDirection?this.currentPosition+t:this.currentPosition-t;const s=1;null!==this.resetPosition?this.options.reverseDirection?i>=0-s?(this.currentPosition=this.resetPosition,this.invokeCallback("onPositionReset")):this.currentPosition=i:i<=this.resetPosition+s?(this.currentPosition=0,this.invokeCallback("onPositionReset")):this.currentPosition=i:this.currentPosition=i,this.container.style.transform="translateX("+this.currentPosition+"px)"}this.animationId=requestAnimationFrame(this.animate.bind(this))},i.prototype.setSpeed=function(t){this.destroyed||"number"==typeof t&&Number.isFinite(t)&&(this.options.speed=t,this.validateOptions())},i.prototype.setReverseDirection=function(t){this.destroyed||(this.options.reverseDirection=!!t)},i.prototype.setFadeColor=function(t){this.destroyed||"string"==typeof t&&(this.options.fadeColor=t,this.applyFadeProperties())},i.prototype.setFadeWidth=function(t){this.destroyed||"number"==typeof t&&Number.isFinite(t)&&(this.options.fadeWidth=t,this.applyFadeProperties())},i.prototype.destroy=function(){this.destroyed=!0,this.isMeasuring=!1,this.isScrolling=!1,this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null),this.boundHandlers.mouseenter&&this.container.removeEventListener("mouseenter",this.boundHandlers.mouseenter),this.boundHandlers.mouseleave&&this.container.removeEventListener("mouseleave",this.boundHandlers.mouseleave),this.boundHandlers.mousedown&&this.container.removeEventListener("mousedown",this.boundHandlers.mousedown),this.boundHandlers.mousemove&&document.removeEventListener("mousemove",this.boundHandlers.mousemove),this.boundHandlers.mouseup&&document.removeEventListener("mouseup",this.boundHandlers.mouseup),this.boundHandlers.mouseleaveWindow&&t.removeEventListener("mouseleave",this.boundHandlers.mouseleaveWindow),this.boundHandlers.touchstart&&this.container.removeEventListener("touchstart",this.boundHandlers.touchstart),this.boundHandlers.touchmove&&document.removeEventListener("touchmove",this.boundHandlers.touchmove),this.boundHandlers.touchend&&document.removeEventListener("touchend",this.boundHandlers.touchend),this.boundHandlers.selectstart&&this.container.removeEventListener("selectstart",this.boundHandlers.selectstart),this.boundHandlers={mouseenter:null,mouseleave:null,mousedown:null,mousemove:null,mouseup:null,mouseleaveWindow:null,touchstart:null,touchmove:null,touchend:null,selectstart:null},this.sizeObserver&&(this.sizeObserver.disconnect(),this.sizeObserver=null),this.sizeObserverTimeout&&(clearTimeout(this.sizeObserverTimeout),this.sizeObserverTimeout=null),this.container.style.transform="",this.container.style.cursor=""},"undefined"!=typeof module&&module.exports?module.exports=i:t.InfiniteScrollCarousel=i}("undefined"!=typeof window?window:this);
//# sourceMappingURL=grab-n-drag-infinite-carousel.min.js.map